<%- include('../layouts/user/header.ejs') -%>

<main class="main">
  <div class="page-header text-center" style="background-image: url('/public/userAssets/assets/images/page-header-bg.jpg')">
    <div class="container">
      <h1 class="page-title">Shopping Cart<span>Shop</span></h1>
    </div><!-- End .container -->
  </div><!-- End .page-header -->
    <nav aria-label="breadcrumb" class="breadcrumb-nav">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Shop</a></li>
                <li class="breadcrumb-item active" aria-current="page">Shopping Cart</li>
            </ol>
        </div><!-- End .container -->
    </nav><!-- End .breadcrumb-nav -->

    <div class="page-content">
      <div class="cart">
          <div class="container">
            <div class="row">
              <div class="col-lg-9">
                <table class="table table-cart table-mobile" id="cartContainer">
                  <% if(total!=0){%>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Qty</th>
                            <th>Total</th>
                            <th>remove</th>
                        </tr>
                    </thead>

                    <tbody>

                        <% for(i=0;i<cartItems.products.length;i++){ %>
                            <tr>
                                <td class="product-col">
                                    <div class="product">
                                        <figure class="product-media">
                                            <a
                                                href="/product?id=<%= cartItems.products[i].product._id %>">
                                                <img src="/public/products/images/<%= cartItems.products[i].product.images.image1%>"
                                                    alt="Product image">
                                            </a>

                                        </figure>
                                        <h3 class="product-title">
                                            <!-- product name -->
                                            <a href="/product?id=<%= cartItems.products[i].product._id %>">
                                                <%= cartItems.products[i].product.product_name %>
                                            </a>

                                        </h3><!-- End .product-title -->
                                    </div><!-- End .product -->
                                </td>
                                <td class="price-col">
                                    ₹ <span
                                        id="singleProductPrice<%= cartItems.products[i].product._id %>">
                                        <%= cartItems.products[i].product.product_price %>
                                    </span>
                                </td>

                                <td class="quantity-col">
                                    <div class="cart-product-quantity">
                                        <button class="quantity-decrease123 px-4 "
                                            onclick="changeQty('<%= user._id %>','<%= cartItems.products[i].product._id %>',-1)">-</button>
                                        <input type="number" class="form-control text-center mx-1"
                                            value="<%= cartItems.products[i].quantity %>" min="1"
                                            max="5" id="qty<%= cartItems.products[i].product._id %>"
                                            step="1" data-decimals="0" required readonly >
                                        <button class="quantity-increase123 px-4"
                                            onclick="changeQty('<%= user._id %>','<%= cartItems.products[i].product._id %>',1)">+
                                        </button>
                                    </div>
                                </td>
                                <!-- test1 -->
                                <!-- <td class="quantity-col"> -->
                                <!-- <div class="cart-product-quantity">
                                <button class="quantity-decrease123 px-4" data-user="<%= user._id %>" data-product="<%= cartItems.products[i].product._id %>">-</button>
                                <input type="number" id="quantity-input-<%= cartItems.products[i].product._id %>" class="form-control text-center mx-1" value="<%= cartItems.products[i].quantity %>"
                                    min="1" max="5" step="1" data-decimals="0" required readonly>
                                <button class="quantity-increase123 px-4" data-user="<%= user._id %>" data-product="<%= cartItems.products[i].product._id %>">+</button>
                            </div>
                        </td> -->
                                <!-- test2 -->
                                <!-- <td class="quantity-col">
                            <div class="cart-product-quantity">
                                <button class="quantity-decrease123 px-4" data-user="<%= user._id %>" data-product="<%= cartItems.products[i].product._id %>">-</button>
                                <input type="number" class="form-control text-center mx-1" value="<%= cartItems.products[i].quantity %>"
                                    min="1" max="5" step="1" data-decimals="0" required readonly>
                                <button class="quantity-increase123 px-4" data-user="<%= user._id %>" data-product="<%= cartItems.products[i].product._id %>">+</button>
                            </div>
                        </td> -->


                                <td class="total-col"
                                    id="singleProductTotal<%= cartItems.products[i].product._id %>">
                                    ₹<%- (cartItems.products[i].product.product_price)*(cartItems.products[i].quantity)
                                        %>
                                </td>
                                <!-- remove item button -->
                                <td class="remove-col">
                                    <button
                                        onclick="removeCartItem('<%= user._id %>','<%= cartItems.products[i].product._id %>','<%= cartItems.products[i].quantity %>')"
                                        class="btn-remove">
                                        <i class="icon-close"></i>
                                    </button>
                                </td>
                            </tr>
                            <%}%>


                    </tbody>
                    <%}else{%>
                        <td class="price-col w-100 text-center text-light">
                            <h2 class="icon-shopping-cart text-light"></h2>You Cart is Empty
                        </td>
                        <%}%>
            </table><!-- End .table table-wishlist -->

            <div class="cart-bottom">

                

                <a href="/cart" class="btn btn-outline-dark-2"><span>UPDATE CART</span><i class="icon-refresh"></i></a>
            </div><!-- End .cart-bottom -->
        </div><!-- End .col-lg-9 -->
        <aside class="col-lg-3">
            <div class="summary summary-cart">
                <h3 class="summary-title">Cart Total</h3><!-- End .summary-title -->

                <table class="table table-summary">
                    <tbody>
                        <tr class="summary-subtotal">
                            <td>Subtotal:</td>
                            <td>₹<span id="subTotalDisplay">
                                    <%= total%>
                                </span></td>
                        </tr><!-- End .summary-subtotal -->




                        <tr class="summary-shipping-row">
                            <td>
                                <label class="" for="standart-shipping">Discount:</label>
                            </td>
                            <td>0.00</td>
                        </tr><!-- End .summary-shipping-row -->





                        <tr class="summary-total">
                            <td>Total:</td>
                            <td>₹<span id="totalDisplay">
                                    <%= total%>
                                </span></td>
                        </tr><!-- End .summary-total -->
                    </tbody>
                </table><!-- End .table table-summary -->
                <% if(total!=0){%>
                    <a href="/checkout" class="btn btn-outline-primary-2 btn-order btn-block " onmouseover="this.style.color='#fff'" onmouseleave="this.style.color='#000'">PROCEED TO CHECKOUT</a>
                <%}%>
                </div><!-- End .summary -->

              <a href="/shop" class="btn btn-outline-dark-2 btn-block mb-3"><span>CONTINUE SHOPPING</span><i class="icon-refresh"></i></a>
              </aside><!-- End .col-lg-3 -->
            </div><!-- End .row -->
          </div><!-- End .container -->
        </div><!-- End .cart -->
    </div><!-- End .page-content -->
</main><!-- End .main -->

<%- include('../layouts/user/footer.ejs') -%>
